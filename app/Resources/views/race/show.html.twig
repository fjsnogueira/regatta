{% extends 'base.html.twig' %}

{% block body %}
    <h1>#{{ race.numberInEvent }}: {{ rr.getOfficialName(race) }}<br>
        {% if race.extraText != "" %}<small>{{ race.extraText }}</small>{% endif %}
    </h1>

    <table>
        <tbody>
            <tr>
                <th>Gender</th>
                <td>{{ race.gender }}</td>
            </tr>
            <tr>
                <th>Age (min.)</th>
                <td>{{ race.ageMin }}</td>
            </tr>
            <tr>
                <th>Age (max.)</th>
                <td>{{ race.ageMax }}</td>
            </tr>
            <tr>
                <th>Level</th>
                <td>{{ race.level }}</td>
            </tr>
            <tr>
                <th>Starter (min.)</th>
                <td>{{ race.starterMin }}</td>
            </tr>
            <tr>
                <th>Starter (max.)</th>
                <td>{{ race.starterMax }}</td>
            </tr>
            <tr>
                <th>Price per starter</th>
                <td>{{ race.pricePerStarter }}</td>
            </tr>
            <tr>
                <th>Competitors per group</th>
                <td>{{ race.competitorsPerGroup }}</td>
            </tr>
        </tbody>
    </table>

    <table class="table table-striped sortable">
        <thead>
            <th data-defaultsign="_19" data-defaultsort="asc">Lauf</th>
            <th data-defaultsign="_19">Bahn</th>
            <th data-defaultsign="az">Name</th>
            <th data-defaultsort='disabled'></th>
        </thead>
        <tbody>
        {% for section in race.getSections() %}
            {% for group in section.getGroups() %}
            {% for rg in group.getRacingGroups() %}
            <tr>
                <td>
                    {{ section.getNumber() }}
                </td>
                <td>
                    {{ group.getLane() }}
                </td>
                <td>
                    {{ rg.getName() }} ({{ rg.getClub().getShortName() }})<br>
                    <em>{% for m in rg.getMembers %}{{ m.getMembership.getPerson.getFirstName }} {{ m.getMembership.getPerson.getLastName | upper }}{% if m.getIsCox %}*{% endif %} {% endfor %}</em>
                </td>
                <td>
                    <a href="#" class="btn btn-warning"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> ändern</a>
                </td>
            </tr>
            {% endfor %}
            {% endfor %}
        {% endfor %}
        </tbody>
    </table>

    <ul>
        <li>
            <a href="{{ path('race_index', { 'id': race.event.id }) }}">Zurück zur Übersicht</a>
        </li>
        <li>
            <a href="{{ path('race_edit', { 'race': race.id, 'event': race.event.id }) }}">Rennen ändern</a>
        </li>
        <li>
            {{ form_start(delete_form) }}
                <input type="submit" value="Löschen">
            {{ form_end(delete_form) }}
        </li>
    </ul>
{% endblock %}
